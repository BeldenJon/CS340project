{{!-- Just some plain text --}}
<h1> Area 57 Construction</h1>
    <div id="navBar">
        <a href="./JobSites">Jobs</a> |
        <a href="./Tasks">Tasks</a> |
        <a href="./Contractors">Contractors</a> |
        <a href="./Trades">Trade</a> |
        <a href="./ContractorsTrades">Contractors Trades</a>
    </div>
<h2>Jobs: captures active jobsite locations, description, timeline and budget. </h2>
{{!-- The Data from our Database --}}

{{!-- Create a table --}}
<table id="JobSite-table">

    {{!-- Header section --}}
    <thead>

        {{!-- For just the first row, we print each key of the row object as a header cell so we
        know what each column means when the page renders --}}
        <tr>
            <th></th>
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th></th>
        </tr>
    </thead>

    {{!-- Body section --}}
    <tbody>
        {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
        {{#each data}}
        <tr>
            <td><a href="#" onClick="updateJob()" value={{this.JobSiteID}}>Edit</a></td>
            <td>{{this.JobSiteID}}</td>
            <td>{{this.JobAddress}}</td>
            <td class="rightA">{{this.JobZipcode}}</td>
            <td>{{this.JobDescription}}</td>
            <td>{{this.JobStart}}</td>
            <td>{{this.JobCompleted}}</td>
            <td class="rightA">{{this.JobCost}}</td>
            <td class="rightA">{{this.JobBudget}}</td>
            <td><a href="#" onClick="deleteJobSite()" value={{this.JobSiteID}}>Delete</a></td>
        </tr>
        {{/each}}
    </tbody>
</table>

<br>
<button onClick="showAddNew()">Add New</button><br><br>


{{!-- Form to add a record to the table using AJAX --}}
<form id="add-JobSite-form-ajax">
    <legend> Add New Job </legend>
    <fieldset class="fields">
        <label for="input-address">Address: </label>
        <input type="text" name="input-address" id="input-address" size="100">

        <label for="input-zipCode">Zip Code: </label>
        <input type="number" name="input-zipCode" id="input-zipCode"><br>

        <label for="input-description">Description: </label>
        <input type="text" name="input-description" id="input-description" size="150"><br>

        <label for="input-startDate">Start Date: </label>
        <input type="date" name="input-startDate" id="input-startDate">

        <label for="input-endDate">End Date: </label>
        <input type="date" name="input-endDate" id="input-endDate"><br>

        <label for="input-jobCost">Job Cost: </label>
        <input type="text" name="input-jobCost" id="input-jobCost">

        <label for="input-jobBudget">Job Budget: </label>
        <input type="text" name="input-jobBudget" id="input-jobBudget"><br>

        <button class=btn type="submit" id="addJob" onClick="showTable()">Add New</button>
        <button class=btn type="button" value="cancel" onClick="showTable()">Cancel</button>
    </fieldset>
</form>

{{!-- Form to update a record to the table using AJAX --}}
<form id="update-JobSite-form-ajax">
    <legend> Update Job </legend>
    <fieldset>
        <label for="update-address">Address: </label>
        <input type="text" name="update-address" id="address" value="9959 West Longfellow St., Federal Way, WA" size="100">

        <label for="update-zipCode">Zip Code: </label>
        <input type="number" name="update-zipCode" id="zipCode" value="92347"><br>

        <label for="update-description">Description: </label>
        <input type="text" name="update-description" id="description" size="150" value=".2 acre lot with 2300 SF home flat wooded lot with connection to city water and sewer."><br>

        <label for="update-starDate">Start Date: </label>
        <input type="date" name="update-starDate" id="starDate" value="2020-08-02">

        <label for="update-endDate">End Date: </label>
        <input type="date" name="update-endDate" id="endDate"><br>

        <label for="update-jobCost">Job Cost: </label>
        <input type="text" name="update-jobCost" id="jobCost" value="$472,114">

        <label type="update-jobBudget">Job Budget: </label>
        <input type="text" name="update-jobBudget" id="jobBudget" value="$500,000"><br>

        <input type="submit">
    </fieldset>
    <button class=btn type="update" id="updateJob" onClick="showTable()">Update</button>
    <button class=btn type="button" value="cancel" onClick="showTable()">Cancel</button>
</form>


{{!-- Form to delete a record to the table using AJAX --}}
<form method="DELETE" id="delete-JobSite-ajax">
    <legend>Delete Job</legend>
    <fieldset>
        <label>Are you sure you would like to remove this job?</label>
    </fieldset>
    <button class=btn type="delete" id="deleteJob" onClick="deleteJobSite()">Yes Delete</button>
    <button class=btn type="button" value="cancel" onClick="showTable()">Cancel</button>
</form>

{{!--Set views--}}
    <script>
        function showTable() {
            document.getElementById("JobSite-table").style.display = "block";
            document.getElementById("add-JobSite-form-ajax").style.display = "none";
            document.getElementById("update-JobSite-form-ajax").style.display = "none";
            document.getElementById("delete-JobSite-ajax").style.display = "none";
        }
        function showAddNew() {
            document.getElementById("JobSite-table").style.display = "block";
            document.getElementById("add-JobSite-form-ajax").style.display = "block";
            document.getElementById("update-JobSite-form-ajax").style.display = "none";
            document.getElementById("delete-JobSite-ajax").style.display = "none";
        }
        function updateJob() {
            document.getElementById("JobSite-table").style.display = "block";
            document.getElementById("add-JobSite-form-ajax").style.display = "none";
            document.getElementById("update-JobSite-form-ajax").style.display = "block";
            document.getElementById("delete-JobSite-ajax").style.diplay = "none";
        }
        function deleteJob() {
            document.getElementById("JobSite-table").style.display = "block";
            document.getElementById("add-JobSite-form-ajax").style.display = "none";
            document.getElementById("update-JobSite-form-ajax").style.display = "none";
            document.getElementById("delete-JobSite-ajax").style.display = "block";
        }
        //default show table on load
        showTable()
    </script>


{{!-- Embed our javascript to handle the DOM manipulation and AJAX request --}}
<script src="./js/add_JobSite.js"></script>
<script src="./js/update_JobSite.js"></script>
<script src="./js/delete_JobSite.js"></script>